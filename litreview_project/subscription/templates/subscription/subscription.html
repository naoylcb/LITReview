{% extends 'posts/base.html' %}

{% block content %}

<h2>Suivre d'autres utilisateurs</h2>

{% if error %}
<p>{{ error }}</p>
{% endif %}

<form method="POST" action="{% url 'subscription:subscription' %}">
    {% csrf_token %}

    <input type="text" name="username" placeholder="Nom d'utilisateur" required>

    <input type="submit" value="S'abonner">
</form>

<h2>Abonnements</h2>
<table>
    {% for uf in user_follows %}
        {% if uf.user == user %}
        <tr>
            <td style="border: 1px solid black;">{{ uf.followed_user }}</td>
            <td style="border: 1px solid black;"><a href="{% url 'subscription:unsubscribe' uf.followed_user %}">Se désabonner</a></td>
        </tr>
        {% endif %}
    {% endfor %}
</table>

<h2>Abonnés</h2>
<table>
    {% for uf in user_follows %}
        {% if uf.followed_user == user %}
        <tr>
            <td style="border: 1px solid black;">{{ uf.user }}</td>
        </tr>
        {% endif %}
    {% endfor %}
</table>

{% endblock %}